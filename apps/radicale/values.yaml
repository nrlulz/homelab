pvc:
  pvcName: radicale-data
  storageRequest: 128Mi
  moverSecurityContext:
    runAsUser: 2999
    runAsGroup: 2999

app-template:
  defaultPodOptions:
    securityContext:
      runAsNonRoot: true
      runAsUser: 2999
      runAsGroup: 2999
  controllers:
    radicale:
      annotations:
        reloader.stakater.com/auto: "true"
      containers:
        radicale:
          image:
            repository: tomsquest/docker-radicale
            tag: 3.5.10.0@sha256:e9d49beb7e459a915a9e828daf22db54d00c5835b4f57ff29419776870fd8687
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
                - ALL
            readOnlyRootFilesystem: true
            seccompProfile:
              type: RuntimeDefault
          env:
            TAKE_FILE_OWNERSHIP: "false"
          probes:
            startup:
              enabled: true
            liveness:
              enabled: true
            readiness:
              enabled: true
  service:
    radicale:
      controller: radicale
      ports:
        http:
          port: 5232
  ingress:
    radicale:
      className: external
      hosts:
        - host: radicale.neils.house
          paths:
            - path: /
              service:
                identifier: radicale
                port: http
  persistence:
    config:
      type: configMap
      name: radicale
      globalMounts:
        - path: /config/config
          subPath: config
          readOnly: true
    data:
      existingClaim: radicale-data
    users:
      type: secret
      name: radicale
      globalMounts:
        - path: /config/users
          subPath: users
          readOnly: true
