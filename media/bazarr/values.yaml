pvc:
  pvcName: bazarr-data
  storageRequest: 256Mi
  moverSecurityContext:
    runAsUser: 1000
    runAsGroup: 1000
    fsGroup: 1000

app-template:
  defaultPodOptions:
    securityContext:
      runAsNonRoot: true
      runAsUser: 1000
      runAsGroup: 1000
      fsGroup: 1000
      fsGroupChangePolicy: OnRootMismatch
  controllers:
    bazarr:
      containers:
        bazarr:
          image:
            repository: ghcr.io/home-operations/bazarr
            tag: 1.5.3@sha256:2f1c32cb1420b2e56f60cfdf7823737eb501fdb2c13669429d23ab3a02e9ad90
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
            capabilities:
              drop:
                - ALL
            seccompProfile:
              type: RuntimeDefault
          env:
            TZ: "America/Los_Angeles"
          probes:
            liveness:
              enabled: true
            readiness:
              enabled: true
  service:
    bazarr:
      controller: bazarr
      ports:
        http:
          port: 6767
  ingress:
    bazarr:
      className: external
      hosts:
        - host: bazarr.neils.house
          paths:
            - path: /
              service:
                identifier: bazarr
                port: http
  persistence:
    config:
      existingClaim: bazarr-data
    media:
      type: nfs
      server: nas.internal
      path: /mnt/media
      globalMounts:
        - path: /mnt/media
    tmp:
      type: emptyDir
